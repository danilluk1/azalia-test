# Backend

Написал сервис для принятия запросов с фронта, для этого выбрал NestJS так как он даёт скорость разработки, и при этом можно не использовать постоянно try catch в простых апишках, хотя и мой опыт показывает, что проблемы в проде возникают именно из-за него, выбрал PostgreSQL для хранения данных с использованием TypeORM так как я люблю постгрес всей душой. Также для хранения предыдущего числа между запросами используется Redis, можно было хранить в простой мапе, но я люблю редис, так как он помогает масштабировать проект, ну и 5мс на запрос добавления числа внутри локальной сети считаю неплохим результатом. Также не понял, зачем в задании указано, чтобы юзер указывал является ли число отрицательным или дробным, поэтому пропустил этот этап

# Frontend

Написал двухстраничный фронтенд с использованием NextJS 13 и app folder'а. Интересный экспириенс работы с бета версией некста. Хотя считаю, что он ещё сыроват для прода, допустим большинство библиотек аля Mantine ещё не знают, как заменить emotions-server. Реализовал CSR при помощи "use client" в начале компонентов, соответственно все остальные станицы по умолчанию SSR. Использовал tailwind, просто потому что считаю такую разработку для fullstack более актуальной.

## Что не сделано, хотя было бы неплохо

<ul>
  <li>Сделать так, чтобы при падения редиса, сервис не падал, так как он в это время мог бы рабоать</li>
  <li>Можно было использовать NextJS как fullstack фреймворк, и реализовать апишку в нём, но такой подход мне не близок, так как он не даёт масштабируемости проекта</li>
  <li>Вынести дата фетчи из компонентов</li>
</ul>

## Как развернуть

Если не отображаются страницы, то это из-за адблока в браузере так как он видит компонент с названием Advertising

Инфраструктура

```
docker compose -f docker-compose.dev.yml
```

Бэк

```
pnpm install
pnpm run start:dev
```

Фронт

```
pnpm install
pnpm run dev
```

### FAQ

Q: Почему не использован докер для развёртывания всего проекта?
<br>
A: Потому что почему-то не подключается к редису из неста?? Хотя делал это много раз, но к данному моменту появилась новая мажорная версия cache-manager-redis-store и всё сломалось. Также при прод сборке некста внутри докера, ему необходимо получить данные из уже запущенной апишки, с чем я ещё не сталкивался, умею только через Vercel. Поэтому считаю это избыточным для тестового задания.
<br>
Q: Почему pnpm?
<br>
A: Отличная скорость и поддержка монорепозиториев
